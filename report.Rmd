---
title: "South Gate PurpleAir Data Report"
author: "~~~~~"
output: pdf_document
params:
  d1: NA
  d2: NA
  d3: NA
  dts1: NA
  dts2: NA
  dts3: NA
  dts4: NA
  hour: NA
  PAhourly: NA
  sensor: NA
  sensors: NA
  summary: NA
  under: NA
---

```{r setup, include=FALSE, echo=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(shiny)
library(ggplot2)
library(plotly)
library(tidyverse)
library(zoo)
library(gridExtra)
library(PurpleAirCEHAT)
library(lubridate)

```

This analysis uses





```{r}
print(params$PAhourly)
```


```{r}
print(params$sensor)
```





```{r plot, echo=FALSE}

readings_underCT <- params$under

pct_diffCols <- c("0-15%"="#EDF8FB", "15%-50%"="#B3CDE3","50%-100%" = "#8C96C6", "200% or more"="#88419D","total readings"="#80808050")

plot <- ggplot(readings_underCT, aes(x=names)) +
    geom_col(aes(y=total_readings, fill= "total readings"), col=1) +
    geom_col(aes(y=`0-15%`, fill="0-15%"), col=1) +
    geom_col(aes(y=`15%-50%`, fill="15%-50%"), col=1) +
    geom_col(aes(y=`50%-100%`, fill="50%-100%"), col=1) +
    geom_col(aes(y=`above_200%`, fill="200% or more"), col=1) +
    labs(x = "Sensors", y = "Count") +
    ggtitle("Readings Under Median by Sensor") +
    theme_minimal()+
    scale_colour_manual(name="Values",values=pct_diffCols, guide = guide_legend(override.aes=aes(fill=NA)) ) +
    scale_fill_manual(name="Values",values=pct_diffCols) +
    theme(axis.text.x = element_text(angle = 75, hjust=1))

print(plot)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
